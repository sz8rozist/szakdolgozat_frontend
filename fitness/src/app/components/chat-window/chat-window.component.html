<div *ngIf="showWindow" class="card chat-card">
  <div
    class="card-header d-flex justify-content-between align-items-center p-3"
    style="border-top: 4px solid #ffa900"
  >
    <h5 class="mb-0">{{'uzenetek'| translate}}</h5>
    <div class="d-flex flex-row align-items-center">
      <i
        class="fas fa-times text-muted fa-xs"
        style="cursor: pointer"
        (click)="closeWindow()"
      ></i>
    </div>
  </div>
  <div
    class="card-body"
    data-mdb-perfect-scrollbar="true"
    style="position: relative; height: 400px; scrollbar-width: thin; overflow: auto;"
  >
    <div *ngFor="let m of messages">
      <ng-container *ngIf="m.receiverUserId == senderUser?.id && m.receiverUserId != user?.id">
        <div class="d-flex justify-content-between">
          <p class="small mb-1">{{m.senderUserFirstName + ' ' + m.senderUserLastName}}</p>
          <p class="small mb-1 text-muted">{{m.dateTime}}</p>
        </div>
        <div class="d-flex flex-row justify-content-start">
          <img
          [src]="user?.profilePictureName"
            alt="avatar 1"
            style="width: 45px; height: 100%"
          />
          <div>
            <p
              class="small p-2 ms-3 mb-3 rounded-3"
              style="background-color: #f5f6f7"
            >
              {{m.message}}
            </p>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="m.receiverUserId == user?.id && m.receiverUserId != senderUser?.id">
        <div class="d-flex justify-content-between">
          <p class="small mb-1 text-muted">{{m.dateTime}}</p>
          <p class="small mb-1">{{m.senderUserFirstName + ' ' + m.senderUserLastName}}</p>
        </div>
        <div class="d-flex flex-row justify-content-end mb-4 pt-1">
          <div>
            <p class="small p-2 me-3 mb-3 text-white rounded-3 bg-warning">{{m.message}}</p>
          </div>
          <img [src]="senderUser?.profilePictureName"
            alt="avatar 1" style="width: 45px; height: 100%;">
        </div>
      </ng-container>
    </div>
  </div>
  <div
    class="card-footer text-muted d-flex justify-content-start align-items-center p-3"
  >
    <div class="input-group mb-0">
      <input
        [(ngModel)]="message"
        type="text"
        class="form-control"
        placeholder="{{'uzenet' | translate}}...."
        aria-label="Recipient's username"
        aria-describedby="button-addon2"
      />
      <button
        (click)="sendMessage()"
        class="btn btn-warning text-white"
        type="button"
        id="button-addon2"
        style="padding-top: 0.55rem"
      >
        {{"kuldes"|translate}}
      </button>
    </div>
  </div>
</div>
